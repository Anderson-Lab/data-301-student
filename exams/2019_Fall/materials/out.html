<h1 id="exam-1---data-301-fall-2019"><span class="header-section-number">1</span> Exam 1 - DATA 301 Fall 2019</h1>
<p><strong>Instructor</strong>: Paul Anderson</p>
<p><strong>Instructions</strong>: Please answer all questions as partial credit is always an option. Short and correct answers are preferred. Unless otherwise stated, you MUST show all of your work. It goes without saying, but just so itâ€™s official. No <code>for</code> loops allowed. And you must use what we have discussed in this course.</p>
<p><strong>Your name</strong>: <br><br><br><br></p>
<p>Unless otherwise stated the dataframe <code>df</code> refers to the Titanic dataset:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb1-1" title="1"><span class="im">import</span> numpy <span class="im">as</span> np</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="im">import</span> pandas <span class="im">as</span> pd</a>
<a class="sourceLine" id="cb1-3" title="3">df <span class="op">=</span> pd.read_csv(<span class="st">&quot;/data301/data/titanic.csv&quot;</span>)</a>
<a class="sourceLine" id="cb1-4" title="4">df.head()  </a></code></pre></div>
<h2 id="describe-what-each-line-of-the-following-code-segment-and-be-specific-when-it-comes-to-return-types-and-behavior."><span class="header-section-number">1.1</span> Describe what each line of the following code segment and be specific when it comes to return types and behavior.</h2>
<pre>
df = pd.read_csv("/data301/data/titanic.csv")
df.head()
</pre>
<p><br><br><br><br><br><br><br></p>
<h2 id="write-the-code-that-would-set-the-index-to-name-for-the-dataframe-df."><span class="header-section-number">1.2</span> Write the code that would set the index to <code>name</code> for the dataframe <code>df</code>.</h2>
<p><br><br><br><br></p>
<h3 id="assuming-you-have-set-the-index-to-name-in-df-what-type-would-the-following-command-return"><span class="header-section-number">1.2.1</span> Assuming you have set the index to <code>name</code> in <code>df</code>, what <strong>type</strong> would the following command return?</h3>
<pre>
df.loc["Allison, Master. Hudson Trevor"]
</pre>
<p><br><br><br></p>
<h3 id="what-would-the-following-return"><span class="header-section-number">1.2.2</span> What would the following return?</h3>
<pre>
df.sex.describe()
</pre>
<p><br><br><br></p>
<h3 id="assuming-you-have-set-the-index-to-name-in-df-what-would-the-following-command-return"><span class="header-section-number">1.2.3</span> Assuming you have set the index to <code>name</code> in <code>df</code>, what would the following command return?</h3>
<pre>
df.fare.idxmax()
</pre>
<p><br><br><br></p>
<h3 id="what-would-happen-if-you-tried-to-execute-the-following-and-why"><span class="header-section-number">1.2.4</span> What would happen if you tried to execute the following and why?</h3>
<pre>
df.iloc["Allison, Master. Hudson Trevor"]
</pre>
<p><br><br><br><br><br><br></p>
<h3 id="what-are-two-different-ways-to-return-the-age-column-without-resorting-to-numerical-indexing-i.e.-no-iloc"><span class="header-section-number">1.2.5</span> What are two different ways to return the <code>age</code> column without resorting to numerical indexing (i.e., no iloc)?</h3>
<p><br><br><br><br><br><br></p>
<h3 id="write-the-code-that-will-calculate-the-mean-absolute-deviation-for-the-fare-column."><span class="header-section-number">1.2.6</span> Write the code that will calculate the mean absolute deviation for the fare column.</h3>
<p><br /><span class="math display">$$
\begin{align}
\textrm{MAD} &amp;= \textrm{mean of } |x_i - \bar x| \\
&amp;= \frac{1}{n} \sum_{i=1}^n |x_i - \bar x|
\end{align}
$$</span><br /> <br><br><br><br><br><br><br><br><br></p>
<h3 id="given-the-titanic-dataframe-above-how-could-you-use-pandas-built-in-string-processing-to-split-out-the-surname.-here-is-sample-data."><span class="header-section-number">1.2.7</span> Given the titanic dataframe above, how could you use Pandas built-in string processing to split out the surname. Here is sample data.</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb2-1" title="1">df.name.head()</a></code></pre></div>
<p><br><br><br><br></p>
<h3 id="given-the-ames-dataset-previewed-below-explain-what-the-following-code-does-and-sketch-the-resulting-graph."><span class="header-section-number">1.2.8</span> Given the Ames dataset (previewed below), explain what the following code does and sketch the resulting graph.</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb3-1" title="1"><span class="op">%</span>matplotlib inline</a>
<a class="sourceLine" id="cb3-2" title="2"><span class="im">import</span> pandas <span class="im">as</span> pd</a>
<a class="sourceLine" id="cb3-3" title="3">pd.options.display.max_rows <span class="op">=</span> <span class="dv">10</span></a>
<a class="sourceLine" id="cb3-4" title="4"></a>
<a class="sourceLine" id="cb3-5" title="5">df <span class="op">=</span> pd.read_csv(</a>
<a class="sourceLine" id="cb3-6" title="6">    <span class="st">&quot;https://raw.githubusercontent.com/dlsun/data-science-book/master/data/AmesHousing.txt&quot;</span>,</a>
<a class="sourceLine" id="cb3-7" title="7">    sep<span class="op">=</span><span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb3-8" title="8">df.head() </a></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb4-1" title="1">df[<span class="st">&quot;Heating QC&quot;</span>].value_counts()</a></code></pre></div>
Here is the code I want you to explain:
<pre>
df["Heating QC"].map({
       "Ex": "Excellent",
       "Gd": "Good",
       "TA": "Average",
       "Fa": "Fair",
       "Po": "Poor"
}).value_counts()[["Poor", "Fair", "Average", "Good", "Excellent"]].plot.bar()
</pre>
<p><br><br><br><br><br><br><br></p>
<h3 id="given-the-following-picture-write-the-pandas-equivalent-code-if-the-original-data-on-the-left-is-stored-in-a-dataframe-called-df.-indicate-which-part-of-your-code-corresponds-to-what-step-in-the-diagram."><span class="header-section-number">1.2.9</span> Given the following picture, write the Pandas equivalent code if the original data on the left is stored in a dataframe called df. Indicate which part of your code corresponds to what step in the diagram.</h3>
<p><img src="split_apply_combine.png" /> <a href="https://github.com/jakevdp/PythonDataScienceHandbook/blob/master/notebooks/03.08-Aggregation-and-Grouping.ipynb">source</a> <br><br><br><br><br></p>
<h3 id="consider-the-following-code-and-output."><span class="header-section-number">1.2.10</span> Consider the following code and output.</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb5-1" title="1">df[<span class="st">&#39;adult&#39;</span>] <span class="op">=</span> df[<span class="st">&#39;age&#39;</span>]<span class="op">&gt;=</span><span class="dv">18</span></a>
<a class="sourceLine" id="cb5-2" title="2">survivors_cube <span class="op">=</span> df.pivot_table(</a>
<a class="sourceLine" id="cb5-3" title="3">    index<span class="op">=</span><span class="st">&quot;sex&quot;</span>, columns<span class="op">=</span>[<span class="st">&quot;adult&quot;</span>, <span class="st">&quot;pclass&quot;</span>],</a>
<a class="sourceLine" id="cb5-4" title="4">    values<span class="op">=</span><span class="st">&quot;survived&quot;</span>, aggfunc<span class="op">=</span>np.mean)</a>
<a class="sourceLine" id="cb5-5" title="5">table <span class="op">=</span> (survivors_cube<span class="op">*</span><span class="dv">10</span>).<span class="bu">round</span>().astype(<span class="bu">int</span>)</a>
<a class="sourceLine" id="cb5-6" title="6">table</a></code></pre></div>
<p>From the above data, what is the result of <code>table.stack()</code>. <br><br><br><br><br><br><br></p>
<h3 id="given-the-following"><span class="header-section-number">1.2.11</span> Given the following:</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb6-1" title="1">adult_pclass_counts <span class="op">=</span> pd.crosstab(df.pclass, df.adult)</a>
<a class="sourceLine" id="cb6-2" title="2">adult_pclass_counts</a></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb7-1" title="1">adult <span class="op">=</span> adult_pclass_counts.<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">0</span>) <span class="op">/</span> N</a>
<a class="sourceLine" id="cb7-2" title="2">adult</a></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb8-1" title="1">pclass <span class="op">=</span> adult_pclass_counts.<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">1</span>) <span class="op">/</span> N</a>
<a class="sourceLine" id="cb8-2" title="2">pclass</a></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb9-1" title="1">N <span class="op">=</span> adult_pclass_counts.<span class="bu">sum</span>().<span class="bu">sum</span>()</a>
<a class="sourceLine" id="cb9-2" title="2">joint <span class="op">=</span> adult_pclass_counts <span class="op">/</span> N</a>
<a class="sourceLine" id="cb9-3" title="3">display(joint)</a>
<a class="sourceLine" id="cb9-4" title="4">expected <span class="op">=</span> np.outer(pclass, adult)</a>
<a class="sourceLine" id="cb9-5" title="5">display(expected)</a></code></pre></div>
<p><strong>What is the code for calculating Chi-square?</strong></p>
<p><strong>Chi-square distance</strong> solves the problem of total variation distance by dividing by the difference by expected proportion, effectively calculating the <em>relative</em> difference between the two proportions:</p>
<p><br /><span class="math display">$$ \chi^2 = \sum_{\text{A, B}} \frac{(P(A \text{ and } B) - P(A) P(B))^2}{P(A) P(B)}. $$</span><br /> <br><br><br><br><br></p>
<h3 id="what-is-the-difference-between-covariance-and-correlation-why-would-you-want-to-look-at-one-or-the-other"><span class="header-section-number">1.2.12</span> What is the difference between covariance and correlation? Why would you want to look at one or the other?</h3>
<p><br><br><br><br><br><br></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"></code></pre></div>
